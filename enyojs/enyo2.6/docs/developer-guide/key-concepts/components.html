  <!DOCTYPE html>
  <html>
  	<head>
  		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  		<title>Enyo API Reference</title>
  		<link rel="shortcut icon" href="/favicon.ico"/>
  		<meta http-equiv="Content-Type" content="text/html; charset=utf8"/>
  		<meta name="apple-mobile-web-app-capable" content="yes"/>
  		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
  
  		<link rel="stylesheet" type="text/css" href="../../css/prism.css" />
  		
  		<link rel="stylesheet" type="text/css" href="../../css/style.css" />
  
  		<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  		<!--[if lt IE 9]>
  		<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
  		<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  		<![endif]-->
  
  
  	</head>
  	<body>
  		<div class="container-fluid">
  			<div class="row" id="header">
  				<div class="col-xs-12">
  					<div class="row">
  						<!-- PLACEHOLDER FOR LOGO -->
  						<div class="col-sm-6 title">
  							<span>ENYODOCS</span>
  						</div>
  						<div class="col-sm-6 primary-nav">
  								<a href="http://enyojs.com">ENYOJS.COM</a>
  								<a href="../../index.html#/home">DOCS HOME</a>
  						</div>
  					</div>
  					<div class="row">
  
  						<nav role="navigation" class="navbar navbar-default fixed-nav">
  							<!-- Brand and toggle get grouped for better mobile display -->
  							<div class="navbar-header">
  								<button id="navbarButton" type="button" data-target="#navbarCollapse" data-toggle="collapse" class="navbar-toggle">
  									<span class="sr-only">Toggle navigation</span>
  									<span class="icon-bar"></span>
  									<span class="icon-bar"></span>
  									<span class="icon-bar"></span>
  								</button>
  								<!--<a href="#" class="navbar-brand">Enyo Docs</a>-->
  							</div>
  							<!-- Collection of nav links and other content for toggling -->
  							<div id="navbarCollapse" class="collapse navbar-collapse">
  								<ul class="nav navbar-nav">
  									<li><a href="../../index.html#/namespaces">Namespaces</a></li>
  									<li><a href="../../index.html#/kinds">Kinds</a></li>
  									<li><a href="../../index.html#/glossary">Glossary</a></li>
  									<li><a href="../../index.html#/utilities">Utilities</a></li>
  									<li><a href="../index.html">Developer Guide</a></li>
  									<li><a href="http://enyojs.com/sampler">Enyo Sampler</a></li>
  									<li class="top hidden-xs hidden-sm"><a id="top-link" href="javascript:void(0);">top</a></li>
  									<li class="show-hide-private"><a id="show-hide-link" href="javascript:void(0);">show private</a></li>
  								</ul>
  							</div>
  						</nav>
  
  					</div>
  				</div>
  			</div>
  
  		</div>

<div id="index" class="hide-private">

  <div id="content" class="guide container">

<h1 class="title">Components</h1>
<p>The Component object, <a href="../..//#/kind/enyo.Component">enyo.Component</a>, is the basic building block of the Enyo framework. Components encapsulate rich behavior and may be used together as modules to create complex applications. When coding an Enyo application, you’ll create many of your own component and control kinds. The information in this document should help you get started.</p>
<h2 id="the-basics">The Basics</h2>
<p>A component is an Enyo kind that can publish properties, expose events, and contain other components. It may be useful to think about components as owning a set of content (other components) and providing inputs (methods and property setters) and outputs (events and property getters). A component controls the content it owns and sends messages to its owner in the form of events. Here’s an example:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1">    <span class="va">enyo</span>.<span class="at">kind</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb1-2" title="2">        <span class="dt">name</span><span class="op">:</span> <span class="st">&quot;RandomizedTimer&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-3" title="3">        <span class="dt">kind</span><span class="op">:</span> <span class="st">&quot;enyo.Component&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-4" title="4">        <span class="dt">minInterval</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-5" title="5">        <span class="dt">published</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-6" title="6">            <span class="dt">baseInterval</span><span class="op">:</span> <span class="dv">100</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-7" title="7">            <span class="dt">percentTrigger</span><span class="op">:</span> <span class="dv">50</span></a>
<a class="sourceLine" id="cb1-8" title="8">        <span class="op">},</span></a>
<a class="sourceLine" id="cb1-9" title="9">        <span class="dt">events</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-10" title="10">            <span class="dt">onTriggered</span><span class="op">:</span> <span class="st">&quot;&quot;</span></a>
<a class="sourceLine" id="cb1-11" title="11">        <span class="op">},</span></a>
<a class="sourceLine" id="cb1-12" title="12">        <span class="dt">create</span><span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb1-13" title="13">            <span class="kw">this</span>.<span class="at">inherited</span>(<span class="kw">arguments</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-14" title="14">            <span class="kw">this</span>.<span class="at">start</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb1-15" title="15">        <span class="op">},</span></a>
<a class="sourceLine" id="cb1-16" title="16">        <span class="dt">destroy</span><span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb1-17" title="17">            <span class="kw">this</span>.<span class="at">stop</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb1-18" title="18">            <span class="kw">this</span>.<span class="at">inherited</span>(<span class="kw">arguments</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-19" title="19">        <span class="op">},</span></a>
<a class="sourceLine" id="cb1-20" title="20">        <span class="dt">start</span><span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb1-21" title="21">            <span class="kw">this</span>.<span class="at">job</span> <span class="op">=</span> <span class="va">window</span>.<span class="at">setInterval</span>(<span class="va">enyo</span>.<span class="at">bind</span>(<span class="kw">this</span><span class="op">,</span> <span class="st">&quot;timer&quot;</span>)<span class="op">,</span> <span class="kw">this</span>.<span class="at">baseInterval</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-22" title="22">        <span class="op">},</span></a>
<a class="sourceLine" id="cb1-23" title="23">        <span class="dt">stop</span><span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb1-24" title="24">            <span class="va">window</span>.<span class="at">clearInterval</span>(<span class="kw">this</span>.<span class="at">job</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-25" title="25">        <span class="op">},</span></a>
<a class="sourceLine" id="cb1-26" title="26">        <span class="dt">timer</span><span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb1-27" title="27">            <span class="cf">if</span> (<span class="va">Math</span>.<span class="at">random</span>() <span class="op">&lt;</span> <span class="kw">this</span>.<span class="at">percentTrigger</span> <span class="op">*</span> <span class="fl">0.01</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-28" title="28">                <span class="kw">this</span>.<span class="at">doTriggered</span>(<span class="op">{</span><span class="dt">time</span><span class="op">:</span> <span class="kw">new</span> <span class="at">Date</span>().<span class="at">getTime</span>()<span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-29" title="29">            <span class="op">}</span></a>
<a class="sourceLine" id="cb1-30" title="30">        <span class="op">},</span></a>
<a class="sourceLine" id="cb1-31" title="31">        <span class="dt">baseIntervalChanged</span><span class="op">:</span> <span class="kw">function</span>(inOldValue) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-32" title="32">            <span class="kw">this</span>.<span class="at">baseInterval</span> <span class="op">=</span> <span class="va">Math</span>.<span class="at">max</span>(<span class="kw">this</span>.<span class="at">minInterval</span><span class="op">,</span> <span class="kw">this</span>.<span class="at">baseInterval</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-33" title="33">            <span class="kw">this</span>.<span class="at">stop</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb1-34" title="34">            <span class="kw">this</span>.<span class="at">start</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb1-35" title="35">        <span class="op">}</span></a>
<a class="sourceLine" id="cb1-36" title="36">    <span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>As the name implies, this is a simple randomized timer component. Its kind is <code>enyo.Component</code>, so it inherits and extends the behavior of the <code>enyo.Component</code> object. It generates an event when the timer fires and exposes a couple of properties to control the firing frequency. As you can see, it’s straightforward to expose properties and events.</p>
<h2 id="properties">Properties</h2>
<p>Exposed properties are placed in a <code>"published"</code> block and may include a default value.</p>
<p>To retrieve a published property’s value, call <code>get()</code>. For example,</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1">        <span class="at">get</span>(<span class="st">&quot;baseInterval&quot;</span>)<span class="op">;</span></a></code></pre></div>
<p>returns the value of <code>baseInterval</code>.</p>
<p>Similarly, to change a published property’s value, call <code>set()</code>. In the current example,</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1">        <span class="at">set</span>(<span class="st">&quot;baseInterval&quot;</span><span class="op">,</span> <span class="dv">75</span>)<span class="op">;</span></a></code></pre></div>
<p>sets <code>baseInterval</code> to 75.</p>
<p>If you have worked with Enyo in the past, you may recall that when you declare a published property, you also have the option to specify a “property-changed” method, which will be called automatically whenever the value is changed. In this example, we’ve defined <code>baseIntervalChanged()</code>, which will be called each time we set a new value for <code>baseInterval</code>.</p>
<p>The property-changed method may be used to perform actions that need to be repeated each time the property value changes, such as data validation. This is, in fact, what we see taking place in <code>baseIntervalChanged()</code>.</p>
<p>Note that it’s often necessary to initialize a property’s value. We typically do this by calling the property-changed method in <code>create()</code>. Since the need for initialization can vary from case to case, we leave this to the component writer’s discretion.</p>
<h2 id="events">Events</h2>
<p>Similarly, events are placed in an <code>"events"</code> block. To fire an event, we call the associated <code>"do"</code> method, another convenience provided by Enyo. For example, to fire the <code>onTriggered</code> event, we call <code>doTriggered</code>. You may pass a single argument to the <code>"do"</code> method–an event object that will be passed along to the event handler. In this case, we send the current time in the event’s <code>time</code> property. In a moment, we’ll see how to handle this event.</p>
<h2 id="components-in-components">Components in Components</h2>
<p>First, though, we’ll create another component kind, named <code>SimulatedMessage</code>:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1">    <span class="va">enyo</span>.<span class="at">kind</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb4-2" title="2">        <span class="dt">name</span><span class="op">:</span> <span class="st">&quot;SimulatedMessage&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb4-3" title="3">        <span class="dt">kind</span><span class="op">:</span> <span class="st">&quot;enyo.Component&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb4-4" title="4">        <span class="dt">components</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb4-5" title="5">            <span class="op">{</span><span class="dt">name</span><span class="op">:</span> <span class="st">&quot;timer&quot;</span><span class="op">,</span> <span class="dt">kind</span><span class="op">:</span> <span class="st">&quot;RandomizedTimer&quot;</span><span class="op">,</span> <span class="dt">percentTrigger</span><span class="op">:</span> <span class="dv">10</span><span class="op">,</span></a>
<a class="sourceLine" id="cb4-6" title="6">                <span class="dt">onTriggered</span><span class="op">:</span> <span class="st">&quot;timerTriggered&quot;</span><span class="op">}</span></a>
<a class="sourceLine" id="cb4-7" title="7">        ]<span class="op">,</span></a>
<a class="sourceLine" id="cb4-8" title="8">        <span class="dt">timerTriggered</span><span class="op">:</span> <span class="kw">function</span>(inSender<span class="op">,</span> inEvent) <span class="op">{</span></a>
<a class="sourceLine" id="cb4-9" title="9">            <span class="kw">this</span>.<span class="at">log</span>(<span class="st">&quot;Simulated Service Message Occurred at &quot;</span> <span class="op">+</span> <span class="va">inEvent</span>.<span class="at">time</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-10" title="10">        <span class="op">}</span></a>
<a class="sourceLine" id="cb4-11" title="11">    <span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>As you can see, there’s a <code>components</code> block and it contains a configuration object specifying a <code>RandomizedTimer</code>. When we create a <code>SimulatedMessage</code> instance, it will create the components in its <code>components</code> block. We say that it “owns” these components, and it’s responsible for their lifecycle. It can refer to these objects by name using the <code>this.$</code> hash; for example, you could call <code>this.$.timer.setPercentTriggered(50)</code>.</p>
<p>Users of the <code>SimulatedMessage</code> component do not have to concern themselves with the timer component. Its behavior is encapsulated inside <code>SimulatedMessage</code>. All components are considered to be private to their owner.</p>
<h2 id="handling-events">Handling Events</h2>
<p>Having addressed the issue of component ownership, we can return our attention to the <code>onTriggered</code> event. Notice the string set for the <code>onTriggered</code> event in the <code>"timer"</code> configuration object. This is the name of the method in <code>SimulatedMessage</code> (the owner of the timer) that will be called to handle the event.</p>
<p>Events are delegated to the generating component’s owner by way of this named delegate string. This lets us avoid the pain of having an add/remove listener mechanism. The first argument sent with every event is <code>"inSender"</code>, which is a reference to the component that generated the event. This argument facilitates code reuse since the same method can be used to handle multiple events distinguished by <code>inSender</code>. The second argument, <code>inEvent</code>, is an object whose properties convey information about the event.</p>
<p>To learn more about events in Enyo, see <a href="event-handling.html">Event Handling</a>.</p>
<h2 id="lifecycle-methods-create-and-destroy">Lifecycle Methods: create() and destroy()</h2>
<p>Returning for a moment to our <code>RandomizedTimer</code> component, you’ll notice that it includes the methods <code>create()</code> and <code>destroy()</code>. The <code>Component</code> kind introduces these lifecycle methods, which complement the <code>constructor()</code> method discussed in <a href="kinds.html">Kinds</a>.</p>
<p>The different roles of these methods are sketched out in the following example:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1">    <span class="kw">var</span> myComponent <span class="op">=</span> <span class="va">enyo</span>.<span class="at">kind</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb5-2" title="2">        <span class="dt">kind</span><span class="op">:</span> <span class="st">&quot;enyo.Component&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-3" title="3">        <span class="dt">constructor</span><span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb5-4" title="4">            <span class="co">// low-level or esoteric initialization, usually not needed at all</span></a>
<a class="sourceLine" id="cb5-5" title="5">            <span class="kw">this</span>.<span class="at">inherited</span>(<span class="kw">arguments</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-6" title="6">        <span class="op">},</span></a>
<a class="sourceLine" id="cb5-7" title="7">        <span class="dt">create</span><span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb5-8" title="8">            <span class="co">// create is called *after* the constructor chain is finished</span></a>
<a class="sourceLine" id="cb5-9" title="9">            <span class="kw">this</span>.<span class="at">inherited</span>(<span class="kw">arguments</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-10" title="10">            <span class="co">// this.$ hash is only available *after* calling inherited create</span></a>
<a class="sourceLine" id="cb5-11" title="11">        <span class="op">},</span></a>
<a class="sourceLine" id="cb5-12" title="12">        <span class="dt">destroy</span><span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb5-13" title="13">            <span class="co">// do inherited teardown</span></a>
<a class="sourceLine" id="cb5-14" title="14">            <span class="kw">this</span>.<span class="at">inherited</span>(<span class="kw">arguments</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-15" title="15">        <span class="op">}</span></a>
<a class="sourceLine" id="cb5-16" title="16">    <span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>Technically, <code>create()</code> differs from <code>constructor()</code> in that the <code>constructor</code> call finishes completely (including any chain of inherited calls) before <code>create()</code> is called, but normal initialization may be done in either method.</p>
<p>For convenience, most components can simply ignore <code>constructor()</code> and rely on <code>create()</code>.</p>
<p>The other important feature of <code>create()</code> is that the <code>this.$</code> hash is ready after <code>Component.create()</code> has executed. This means that an override of <code>create()</code> is generally where you would do initialization tasks for owned components. For example:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1">    components<span class="op">:</span> [</a>
<a class="sourceLine" id="cb6-2" title="2">        <span class="op">{</span><span class="dt">kind</span><span class="op">:</span> <span class="st">&quot;MyWorker&quot;</span><span class="op">}</span></a>
<a class="sourceLine" id="cb6-3" title="3">    ]<span class="op">,</span></a>
<a class="sourceLine" id="cb6-4" title="4">    create<span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb6-5" title="5">        <span class="kw">this</span>.<span class="at">inherited</span>(<span class="kw">arguments</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-6" title="6">        <span class="co">// put MyWorker to work</span></a>
<a class="sourceLine" id="cb6-7" title="7">        <span class="kw">this</span>.<span class="va">$</span>.<span class="va">myWorker</span>.<span class="at">work</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb6-8" title="8">    <span class="op">}</span></a></code></pre></div>
<p>Since components frequently reference other components (e.g., <code>this.$.myWorker</code> references the <code>MyWorker</code> instance), we need a place where we can clean up the references so that components may be garbage-collected. The <code>destroy()</code> method provides that place, while also housing general cleanup code.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1">    destroy<span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb7-2" title="2">        <span class="co">// stop MyWorker from working</span></a>
<a class="sourceLine" id="cb7-3" title="3">        <span class="kw">this</span>.<span class="va">$</span>.<span class="va">myWorker</span>.<span class="at">stop</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb7-4" title="4">        <span class="co">// standard cleanup</span></a>
<a class="sourceLine" id="cb7-5" title="5">        <span class="kw">this</span>.<span class="at">inherited</span>(<span class="kw">arguments</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-6" title="6">        <span class="co">// this.$ hash is empty now</span></a>
<a class="sourceLine" id="cb7-7" title="7">    <span class="op">}</span></a></code></pre></div>
<p><strong>Note:</strong> If you make a custom reference to a component that is not cleaned up by a <code>destroy()</code> method, then calling <code>destroy()</code> will not actually make that object subject to garbage collection. For this reason, there is a <code>this.destroyed</code> flag on each component. If <code>this.destroyed</code> is <code>true</code>, the component has been uninitialized and the reference should be removed.</p>
<h2 id="summary">Summary</h2>
<p>To review, components are basic building blocks that encapsulate behavior (often by using other sub-components) and expose an interface in the form of methods, properties, and events.</p>
<p><strong>Additional Reading</strong></p>
<ul>
<li><a href="controls.html">Controls</a></li>
<li><a href="kinds.html">Kinds</a></li>
<li><a href="event-handling.html">Event Handling</a></li>
</ul>

  </div>

</div>

  <div class="container-fluid">
    <div class="row" id="footer">
  	<div class="license">
  		<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a>
  	</div>
      <div class="text-right generated">
        Generated Monday, February 28, 2022
      </div>
    </div>
  </div>
  
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="../../js/bootstrap.min.js"></script>
  
  <script type="text/javascript">$.browser = {}; $.browser.msie = navigator.userAgent.match(/msie/i); /* Patch for hashchange */</script>
  <script type="text/javascript" src="../../js/jquery.ba-hashchange.min.js"></script>
  <script type="text/javascript" src="../../js/main.js"></script>
  <script type="text/javascript" src="../../js/prism.js"></script>
  
  <script type="text/javascript">
  
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-28416388-1']);
    _gaq.push(['_trackPageview']);
  
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  
  </script>
  
  </body>
  </html>
