<!DOCTYPE html>
<html>
	<head>
		<title>$if(pagetitle)$$pagetitle$$endif$</title>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<link rel="stylesheet" href="_css/chrome.css" />
		<link rel="stylesheet" href="../_css/chrome.css" />
		<link rel="stylesheet" href="../../_css/chrome.css" />
		<link rel="stylesheet" href="../../../_css/chrome.css" />
		<script src="_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="../_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="../../_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="../../../_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="_js/doc.js" type="text/javascript"></script>
		<script src="../_js/doc.js" type="text/javascript"></script>
		<script src="../../_js/doc.js" type="text/javascript"></script>
		<script src="../../../_js/doc.js" type="text/javascript"></script>
	</head>
	<body>
		<div id="content">
    
    <h1 id="bluetooth-serial-port-protocol-spp">
      Bluetooth Serial Port Protocol (SPP)
    </h1>
    <p>
      With webOS 2.0, your app can use the Bluetooth SPP to access certain Bluetooth devices. At this time, <em>only</em> the SPP is exposed. Note that you can see what <a href="http://en.wikipedia.org/wiki/Bluetooth_profile" target="_blank">Bluetooth profiles</a> your device supports in the Device Info application.
    </p>
    <p>
      <strong>Bluetooth Code Sample - GPS Device</strong>
    </p>
    <p>
      The SDK code samples contain a Bluetooth project which opens a port to a Bluetooth GPS device and reads its position data.
    </p>
    <p>
      <strong>In this section:</strong>
    </p>
    <ul>
      <li>
        <a href="#methods">Methods</a>
      </li>
      <li>
        <a href="#basic">Basic Process for Server/Client Data Exchange</a>
      </li>
      <li>
        <a href="#notifications">Notifications</a>
      </li>
    </ul><a name="methods" id="methods"></a>
    <hr>
    <h2 id="methods">
      Methods
    </h2>
    <ul>
      <li>
        <a href="#GAP">GAP method</a> -- URI is <code>com.palm.bluetooth/gap</code>
      </li>
      <li>
        <a href="#SPPaccess">SPP Access Methods</a> -- URI is <code>com.palm.bluetooth/spp</code>
      </li>
      <li>
        <a href="#SPPdata">SPP Data Transfer Methods</a> -- URI is <code>com.palm.service.bluetooth.spp</code>
      </li>
    </ul><a name="basic" id="basic"></a>
    <hr>
    <h2 id="basic-process-for-serverclient-data-exchange">
      Basic Process for Server/Client Data Exchange
    </h2>
    <p>
      Before beginning, both client and server webOS devices should have &quot;paired&quot; using their Bluetooth installed programs. Bluetooth pairing happens when two Bluetooth enabled devices agree to communicate with one another. Both devices have to have Bluetooth turned on so they can &quot;discover&quot; one another. When they agree to communicate, the two devices join what is called a &quot;trusted pair.&quot;
    </p>
    <h3 id="server">
      Server
    </h3>
    <ol style="list-style-type: decimal">
      <li>Call <a href="#subscribe">subscribenotifications</a> to receive SPP notifications.
      </li>
      <li>Call <a href="#enable">enableserver</a> to make device an SPP server with specified service name.
      </li>
      <li>Wait for connect <a href="#notifications">notification</a> from client device. Extract instance ID.
      </li>
      <li>Using instance ID from client, <a href="#open">open</a> an SPP port for client communications.
      </li>
      <li>
        <a href="#write">Write</a> data to client. Repeat calling <a href="#write">write</a> until done.
      </li>
      <li>Wait until disconnect <a href="#notifications">notification</a> arrives from client before calling <a href="#close">close</a> to remove the port connection.
      </li>
      <li>Call <a href="#disable">disableserver</a> to remove device as SPP server.
      </li>
    </ol>
    <h3 id="client">
      Client
    </h3>
    <ol style="list-style-type: decimal">
      <li>Call <a href="#subscribe">subscribenotifications</a> to receive SPP notifications.
      </li>
      <li>Call <a href="#gettrusteddevices">gettrusteddevices</a> to get a list of paired devices from the Bluetooth service.
      </li>
      <li>Call <a href="#connect">connect</a> to connect to server device.
      </li>
      <li>Wait for <a href="#notification">service names notification</a> to arrive. Extract service's instance ID and service name.
      </li>
      <li>Call <a href="#selectservice">selectservice</a> using service name and instance ID from service names notification.
      </li>
      <li>Use instance ID to <a href="#open">open</a> port to Server.
      </li>
      <li>
        <a href="#read">Read</a> data from server. Repeat calling <a href="#read">read</a> until done.
      </li>
      <li>
        <a href="#close">Close</a> port to server.
      </li>
      <li>
        <a href="#disconnect">Disconnect</a> from server.
      </li>
    </ol><a name="notifications" id="notifications"></a>
    <hr>
    <h2 id="notifications">
      Notifications
    </h2>
    <p>
      When an app calls <a href="#subscribe">subscribenotifications</a>, they can begin receiving one of the following SPP notifications.
    </p>
    <h3 id="syntax">
      Syntax
    </h3>
    <pre>
{
    "notification" : string,
    "instanceId"   : int,
    "address"      : string,
    "name"         : string,
    "services"     : string array,
    "error"        : int    
}   
</pre>
    <h3 id="parameters">
      Parameters
    </h3>
    <table border="1" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            notification
          </td>
          <td>
            Yes
          </td>
          <td>
            string
          </td>
          <td>
            One of the following:
            <ul>
              <li>
                <strong>notifnserverenabled</strong> -- Device is enabled as an SPP server.
              </li>
              <li>
                <strong>notifnserverdisenabled</strong> -- Device is disabled as an SPP server.
              </li>
              <li>
                <strong>notifndatasent</strong> -- Indicates that data has been sent.
              </li>
              <li>
                <strong>notifnconnected</strong> -- Connected. Sent when a client connects to an SPP server. This notification contains an instance ID the server can use to open a communications port to the client.
              </li>
              <li>
                <strong>notifndisconnected</strong> -- Disconnected from SPP server.
              </li>
              <li>
                <strong>notifnservicenames</strong> -- After a client connects to an SPP server, it gets a list of the SPP server's services and an instance ID it can use to select a service.
              </li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>
            instanceId
          </td>
          <td>
            No
          </td>
          <td>
            int
          </td>
          <td>
            Subscribed service identifier. Sent for <strong>notifnservicenames</strong>, <strong>notifnconnected</strong>, and <strong>notifndisconnected</strong>.
          </td>
        </tr>
        <tr>
          <td>
            address
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Bluetooth device address containing hex digits for an IEEE standard MAC address, i.e., <code>&quot;00:0d:b5:38:c0:3f&quot;</code>. Sent for <strong>notifnconnected</strong> and <strong>notifndisconnected</strong>.
          </td>
        </tr>
        <tr>
          <td>
            name
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            User given device name, i.e., &quot;Joe's HP TouchPad&quot;. Sent for <strong>notifnconnected</strong> and <strong>notifndisconnected</strong>.
          </td>
        </tr>
        <tr>
          <td>
            services
          </td>
          <td>
            No
          </td>
          <td>
            string array
          </td>
          <td>
            Array of SPP server names. Sent for <strong>notifnservicenames</strong>.
          </td>
        </tr>
        <tr>
          <td>
            error
          </td>
          <td>
            No
          </td>
          <td>
            int
          </td>
          <td>
            Error code. 0 = No error.
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <br>
      <strong>Examples</strong>
    </p>
    <pre>
{
   "notification":"notifnserverenabled",
   "error":0
}

{
   "notification":"notifnservicenames",
   "instanceId":23,
   "services":[
      "HPQA"
   ]
}

{
   "notification":"notifnconnected",
   "address":"00:1d:fe:77:c3:a7",
   "name":"Joe's HP TouchPad",
   "instanceId":27,
   "error":0
}

{
   "notification":"notifndisconnected",
   "address":"08:1d:fe:77:c2:d3",
   "name":"My Palm3",
   "instanceId":23,
   "error":0
}
</pre>
    <p>
      <strong>Mojo -- Sample Notification Implementation Code</strong>
    </p>
    <p>
      Note that this is not a completely self-contained example, but should give you some idea of flow. Note also that this is server side code, the code for a client would be somewhat different.
    </p>
    <pre>
MainAssistant.prototype.setup = function()
{

    this.count      = 0;
    this.maxcount   = 10;
    this.urlgap     = 'palm://com.palm.bluetooth/gap';
    this.urlspp     = 'palm://com.palm.bluetooth/spp';
    this.urlservice = 'palm://com.palm.service.bluetooth.spp';

}

MainAssistant.prototype.subscribe = function(sub)
{
    var msg =
    {
        method: "subscribenotifications",
        parameters: {"subscribe": true},
        onSuccess: this.sppNotify.bind(this),
    };
    this.sppNotificationService = this.serviceRequest(this.urlspp, msg);
}    

MainAssistant.prototype.sppNotify = function(objData)
{
    var that = this; // for scoping

    if (! objData.notification)
    {
        this.log("sppNotify", Object.toJSON(objData));
        if (objData.returnValue  &&  objData.subscribed)
        {
            this.enableserver(true);
        }
        return;
    }

    switch(objData.notification)
    {
        case "notifnserverenabled":
            this.log(objData.notification, "error = " + objData.error);
        break;

        case "notifnserverdisabled":
            this.log(objData.notification, "error = " + objData.error);
            if (this.count &gt;= this.maxcount)
            {
                this.log("", "SUCCESSFUL!");
            }
        break;

        case "notifnconnected":
            this.log(objData.notification, objData.instanceId);
            if (objData.error === 0)
            {
                this.open(objData.instanceId);
            }
        break;

        case "notifndisconnected":
            this.log(objData.notification, "Connection terminated/Out of range");
            this.enableserver(false);
        break;

        default:
            this.log(objData.notification, Object.toJSON(objData));
        break;
    }
}
</pre><br>
    <a name="GAP" id="GAP"></a>
    <hr>
    <h2 id="gap-method">
      GAP Method
    </h2>
    <p>
      GAP (Generic Access Profile) defines how two Bluetooth units discover and establish a connection with each other.
    </p>
    <p>
      The URI for the one GAP method is:
    </p>
    <pre>
com.palm.bluetooth/gap/gettrusteddevices
</pre>
    <hr>
    <h3 id="gettrusteddevices">
      gettrusteddevices
    </h3>
    <p>
      Return information about Bluetooth devices that are paired with a webOS device.
    </p>
    <h4 id="syntax-1">
      Syntax
    </h4>
    <pre>
{}
</pre>
    <h4 id="parameters-1">
      Parameters
    </h4>
    <p>
      None.
    </p>
    <h4 id="returns">
      Returns
    </h4>
    <pre>
{
    "returnValue" : boolean,
    "trusteddevices" :
    [{
        "address"          : string,
        "name"             : string,
        "cod"              : int,
        "renamed"          : boolean,
        "status"           : string,
        "mapstate"         : int,
        "pbapstate"         : int,
        "hfstate"          : int,
        "autoconnectstate" : int
     }]
}
</pre>
    <table border="1" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            returnValue
          </td>
          <td>
            Yes
          </td>
          <td>
            boolean
          </td>
          <td>
            <code>true</code> (success) or <code>false</code> (failure)
          </td>
        </tr>
        <tr>
          <td>
            trusteddevices
          </td>
          <td>
            Yes
          </td>
          <td>
            object array
          </td>
          <td>
            Array of objects. See fields below. If no trusted devices, this is an empty array.
          </td>
        </tr>
        <tr>
          <td style="padding-left:30px">
            address
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Bluetooth device address containing hex digits for an IEEE standard MAC address, i.e., <code>&quot;00:0d:b5:38:c0:3f&quot;</code>.
          </td>
        </tr>
        <tr>
          <td style="padding-left:30px">
            name
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Device name, e.g., <code>&quot;BT-GPS-38C03F&quot;</code>
          </td>
        </tr>
        <tr>
          <td style="padding-left:30px">
            cod
          </td>
          <td>
            No
          </td>
          <td>
            int
          </td>
          <td>
            Class of device -- indicates the device type and which types of services it supports.
          </td>
        </tr>
        <tr>
          <td style="padding-left:30px">
            renamed
          </td>
          <td>
            No
          </td>
          <td>
            boolean
          </td>
          <td>
            Indicates if user has modified device's name.
          </td>
        </tr>
        <tr>
          <td style="padding-left:30px">
            status
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            connected|disconnected
          </td>
        </tr>
        <tr>
          <td style="padding-left:30px">
            mapstate
          </td>
          <td>
            No
          </td>
          <td>
            int
          </td>
          <td>
            Message Access (SMS) state - 1 (yes), 2 (no), or 255 (undefined). Indicates if the user has set the &quot;Receive SMS&quot; option to &quot;ON&quot;.
          </td>
        </tr>
        <tr>
          <td style="padding-left:30px">
            pbapstate
          </td>
          <td>
            No
          </td>
          <td>
            int
          </td>
          <td>
            Phone Book Access state - 1 (yes), 2 (no), or 255 (undefined). Indicates if the user has set the &quot;Receive Phone Calls&quot; option to &quot;ON&quot;.
          </td>
        </tr>
        <tr>
          <td style="padding-left:30px">
            hfstate
          </td>
          <td>
            No
          </td>
          <td>
            int
          </td>
          <td>
            Hands Free state, only for webOS tablet acting as headset - 1 (yes), 2 (no), or 255 (undefined).
          </td>
        </tr>
        <tr>
          <td style="padding-left:30px">
            autoconnectstate
          </td>
          <td>
            No
          </td>
          <td>
            int
          </td>
          <td>
            Only for webOS devices -- paired devices can receive the same phone calls or sms notifications if both have &quot;Receive Phone Calls&quot; (pbap), &quot;Receive SMS&quot; (map) and &quot;Auto-Connect&quot; all set to &quot;ON&quot;. Note that these options are available when you select a paired device in the Bluetooth app. These devices will automatically connect when they come into each other's range. 1 (yes), 2 (no), or 255 (undefined).
          </td>
        </tr>
      </tbody>
    </table><br>
    <h4 id="examples">
      Examples
    </h4>
    <p>
      <strong>Enyo</strong>
    </p>
    <pre>
...
{
    name : "getDevices",
    kind : "PalmService",
    service : "palm://com.palm.bluetooth/gap/",
    method : "gettrusteddevices",
    onSuccess : "getDevicesFinished",
    onFailure : "getDevicesFail",
    onResponse : "gotResponse",
    subscribe : true
}
...     

getDevicesFinished : function(inSender, inResponse) {
    enyo.log("gettrusteddevices success, results=" + enyo.json.stringify(inResponse));
},
getDevicesFail : function(inSender, inResponse) {
    enyo.log("gettrusteddevices failure, results=" + enyo.json.stringify(inResponse));
},
getDevicesCall : function(inSender, inResponse)
{
    this.$.getDevices.call({});
}
</pre>
    <p>
      <strong>Mojo</strong>
    </p>
    <pre>
   this.controller.serviceRequest('palm://com.palm.bluetooth/gap', {
        method: 'gettrusteddevices',
        parameters: {},
         onSuccess : function (e){ Mojo.Log.info("gettrusteddevices success, results="+JSON.stringify(e)); },
         onFailure : function (e){ Mojo.Log.info("gettrusteddevices failure, results="+JSON.stringify(e)); }
    });
</pre>
    <p>
      <strong>Success</strong>
    </p>
    <pre>
gettrusteddevices success, results=
{
   "returnValue":true,
   "trusteddevices":[
      {
         "address":"70:1a:04:9c:20:9a",
         "name":"E64004CRBVL1",
         "cod":4063500,
         "renamed":true,
         "status":"disconnected",
         "mapstate":1,
         "pbapstate":255,
         "hfstate":1,
         "autoconnectstate":1
      }
   ]
}
</pre><a name="SPPaccess" id="SPPaccess"></a>
    <hr>
    <h2 id="spp-access-methods">
      SPP Access Methods
    </h2>
    <p>
      SPP (Serial Port Profile) is based on ETSI 07,10 and the RFCOMM protocol. It emulates a serial cable to provide a simple substitute for existing RS-232, including the familiar control signals.
    </p>
    <p>
      The URI for SPP access is:
    </p>
    <pre>
com.palm.bluetooth/spp
</pre>
    <p>
      <strong>Methods</strong>
    </p>
    <ul>
      <li>
        <a href="#connect">connect</a> -- Connect to an SPP server.
      </li>
      <li>
        <a href="#disable">disableserver</a> -- Disable an SPP server.
      </li>
      <li>
        <a href="#disconnect">disconnect</a> -- Disconnect from an SPP peer.
      </li>
      <li>
        <a href="#enable">enableserver</a> -- Make device a SPP server with specified service name.
      </li>
      <li>
        <a href="#select">selectservice</a> -- Select a service from list of services received through notification.
      </li>
      <li>
        <a href="#subscribe">subscribenotifications</a> -- Subscribe to SPP notifications.
      </li>
    </ul><a name="connect" id="connect"></a>
    <hr>
    <h3 id="connect">
      connect
    </h3>
    <p>
      Connect to an SPP server.
    </p>
    <h4 id="syntax-2">
      Syntax
    </h4>
    <pre>
{
    "address"    : string
}
</pre>
    <h4 id="parameters-2">
      Parameters
    </h4>
    <table border="1" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            address
          </td>
          <td>
            Yes
          </td>
          <td>
            string
          </td>
          <td>
            Bluetooth device address containing hex digits for an IEEE standard MAC address, i.e., <code>&quot;00:0d:b5:38:c0:3f&quot;</code>.
          </td>
        </tr>
      </tbody>
    </table>
    <h4 id="returns-1">
      Returns
    </h4>
    <pre>
{
    "returnValue"  : boolean,
    "errorCode"    : string,
    "errorText"    : string
}       
</pre>
    <table border="1" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            returnValue
          </td>
          <td>
            Yes
          </td>
          <td>
            boolean
          </td>
          <td>
            <code>true</code> (success) or <code>false</code> (failure)
          </td>
        </tr>
        <tr>
          <td>
            errorCode
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Error code returned on failure.
          </td>
        </tr>
        <tr>
          <td>
            errorText
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Error message returned on failure.
          </td>
        </tr>
      </tbody>
    </table><br>
    <h4 id="examples-1">
      Examples
    </h4>
    <p>
      <strong>Mojo</strong>
    </p>
    <pre>
this.controller.serviceRequest('palm://com.palm.bluetooth/spp/', {
    method: 'connect',
    parameters: { 
        "address" : "00:1d:fe:77:x3:a7"
    },
    onSuccess : function (e){ Mojo.Log.info("connect success, results="+JSON.stringify(e)); },
    onFailure : function (e){ Mojo.Log.info("connect failure, results="+JSON.stringify(e)); }   
});
</pre><a name="disable" id="disable"></a>
    <hr>
    <h3 id="disableserver">
      disableserver
    </h3>
    <p>
      Disable an SPP server.
    </p>
    <h4 id="syntax-3">
      Syntax
    </h4>
    <pre>
{
    "servicename" : string
}
</pre>
    <h4 id="parameters-3">
      Parameters
    </h4>
    <table border="1" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            servicename
          </td>
          <td>
            Yes
          </td>
          <td>
            string
          </td>
          <td>
            Server name. Name used when enabling server.
          </td>
        </tr>
      </tbody>
    </table>
    <h4 id="returns-2">
      Returns
    </h4>
    <pre>
{
    "returnValue"  : boolean,
    "errorCode"    : string,
    "errorText"    : string
}       
</pre>
    <table border="1" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            returnValue
          </td>
          <td>
            Yes
          </td>
          <td>
            boolean
          </td>
          <td>
            <code>true</code> (success) or <code>false</code> (failure)
          </td>
        </tr>
        <tr>
          <td>
            errorCode
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Error code returned on failure.
          </td>
        </tr>
        <tr>
          <td>
            errorText
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Error message returned on failure.
          </td>
        </tr>
      </tbody>
    </table><br>
    <h4 id="examples-2">
      Examples
    </h4>
    <p>
      <strong>Mojo</strong>
    </p>
    <pre>
this.controller.serviceRequest('palm://com.palm.bluetooth/spp/', {
    method: 'disableserver',
    parameters: {
          "servicename":"HPQA"
    },
    onSuccess : function (e){ Mojo.Log.info("disableserver success, results="+JSON.stringify(e)); },
    onFailure : function (e){ Mojo.Log.info("disableserver failure, results="+JSON.stringify(e)); }     
});
</pre><a name="disconnect" id="disconnect"></a>
    <hr>
    <h3 id="disconnect">
      disconnect
    </h3>
    <p>
      Disconnect from an SPP peer.
    </p>
    <h4 id="syntax-4">
      Syntax
    </h4>
    <pre>
{
    "address"    : string
}
</pre>
    <h4 id="parameters-4">
      Parameters
    </h4>
    <table border="1" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            address
          </td>
          <td>
            Yes
          </td>
          <td>
            string
          </td>
          <td>
            Bluetooth device address containing hex digits for an IEEE standard MAC address, i.e., <code>&quot;00:0d:b5:38:c0:3f&quot;</code>.
          </td>
        </tr>
      </tbody>
    </table>
    <h4 id="returns-3">
      Returns
    </h4>
    <pre>
{
    "returnValue"  : boolean,
    "errorCode"    : string,
    "errorText"    : string
}       
</pre>
    <table border="1" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            returnValue
          </td>
          <td>
            Yes
          </td>
          <td>
            boolean
          </td>
          <td>
            <code>true</code> (success) or <code>false</code> (failure)
          </td>
        </tr>
        <tr>
          <td>
            errorCode
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Error code returned on failure.
          </td>
        </tr>
        <tr>
          <td>
            errorText
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Error message returned on failure.
          </td>
        </tr>
      </tbody>
    </table>
    <h4 id="examples-3">
      Examples
    </h4>
    <p>
      <strong>Mojo</strong>
    </p>
    <pre>
this.controller.serviceRequest('palm://com.palm.bluetooth/spp/', {
    method: 'disconnect',
    parameters: {
          "address":"70:1a:04:9c:20:9a"
    },
    onSuccess : function (e){ Mojo.Log.info("disconnect success, results="+JSON.stringify(e)); },
    onFailure : function (e){ Mojo.Log.info("disconnect failure, results="+JSON.stringify(e)); }    
});
</pre><a name="enable" id="enable"></a>
    <hr>
    <h3 id="enableserver">
      enableserver
    </h3>
    <p>
      Make webOS device an SPP server with a specified service name.
    </p>
    <h4 id="syntax-5">
      Syntax
    </h4>
    <pre>
{
   "servicename" : string
}
</pre>
    <h4 id="parameters-5">
      Parameters
    </h4>
    <table border="1" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            servicename
          </td>
          <td>
            Yes
          </td>
          <td>
            string
          </td>
          <td>
            Service name, 128 characters maximum.
          </td>
        </tr>
      </tbody>
    </table>
    <h4 id="returns-4">
      Returns
    </h4>
    <pre>
{
    "returnValue"  : boolean,
    "errorCode"    : string,
    "errorText"    : string
}       
</pre>
    <table border="1" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            returnValue
          </td>
          <td>
            Yes
          </td>
          <td>
            boolean
          </td>
          <td>
            <code>true</code> (success) or <code>false</code> (failure)
          </td>
        </tr>
        <tr>
          <td>
            errorCode
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Error code returned on failure.
          </td>
        </tr>
        <tr>
          <td>
            errorText
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Error message returned on failure.
          </td>
        </tr>
      </tbody>
    </table><br>
    <h4 id="examples-4">
      Examples
    </h4>
    <p>
      <strong>Mojo</strong>
    </p>
    <pre>
this.controller.serviceRequest('palm://com.palm.bluetooth/spp/', {
    method: 'enableserver',
    parameters: {"servicename":"HPQA"},
    onSuccess : function (e){ Mojo.Log.info("enableserver success, results="+JSON.stringify(e)); },
    onFailure : function (e){ Mojo.Log.info("enableserver failure, results="+JSON.stringify(e)); }      
});
</pre>
    <p>
      <strong>Failure</strong>
    </p>
    <pre>
{
    "returnValue":false,
    "errorCode":134217729,
    "errorText":"BtSppEnableServer: Error enabling server"
}
</pre><a name="select" id="select"></a>
    <hr>
    <h3 id="selectservice">
      selectservice
    </h3>
    <p>
      Select a service from list of services received through notification.
    </p>
    <h4 id="syntax-6">
      Syntax
    </h4>
    <pre>
{
    "instanceId"  : int,
    "servicename" : string
}   
</pre>
    <h4 id="parameters-6">
      Parameters
    </h4>
    <table border="1" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            instanceId
          </td>
          <td>
            Yes
          </td>
          <td>
            integer
          </td>
          <td>
            Subscribed service identifier.
          </td>
        </tr>
        <tr>
          <td>
            servicename
          </td>
          <td>
            Yes
          </td>
          <td>
            string
          </td>
          <td>
            Service name, returned from <a href="#subscribe"><code>subscribenotifications</code></a>.
          </td>
        </tr>
      </tbody>
    </table>
    <h4 id="examples-5">
      Examples
    </h4>
    <p>
      <strong>Mojo</strong>
    </p>
    <pre>
this.controller.serviceRequest('palm://com.palm.bluetooth/spp/', {
    method: 'selectservice',
    parameters: { 
                   "instanceId" : 23, 
                   "servicename":"HPQA"
    },
    onSuccess : function (e){ Mojo.Log.info("selectservice success, results="+JSON.stringify(e)); },
    onFailure : function (e){ Mojo.Log.info("selectservice failure, results="+JSON.stringify(e)); }     
});
</pre>
    <h4 id="returns-5">
      Returns
    </h4>
    <pre>
{
    "returnValue"  : boolean,
    "errorCode"    : string,
    "errorText"    : string
}       
</pre>
    <table border="1" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            returnValue
          </td>
          <td>
            Yes
          </td>
          <td>
            boolean
          </td>
          <td>
            <code>true</code> (success) or <code>false</code> (failure)
          </td>
        </tr>
        <tr>
          <td>
            errorCode
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Error code returned on failure.
          </td>
        </tr>
        <tr>
          <td>
            errorText
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Error message returned on failure.
          </td>
        </tr>
      </tbody>
    </table><br>
    <a name="subscribe" id="subscribe"></a>
    <hr>
    <h3 id="subscribenotifications">
      subscribenotifications
    </h3>
    <p>
      Subscribe to SPP notifications.
    </p>
    <h4 id="syntax-7">
      Syntax
    </h4>
    <pre>
{
    "subscribe" : boolean
}
</pre>
    <h4 id="parameters-7">
      Parameters
    </h4>
    <table border="1" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            subscribe
          </td>
          <td>
            Yes
          </td>
          <td>
            boolean
          </td>
          <td>
            Subscribe to Bluetooth SPP notifications flag.
          </td>
        </tr>
      </tbody>
    </table>
    <h4 id="returns-6">
      Returns
    </h4>
    <pre>
{
    "returnValue"  : boolean,
    "errorCode"    : string,
    "errorText"    : string
}       
</pre>
    <table border="1" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            returnValue
          </td>
          <td>
            Yes
          </td>
          <td>
            boolean
          </td>
          <td>
            <code>true</code> (success) or <code>false</code> (failure)
          </td>
        </tr>
        <tr>
          <td>
            errorCode
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Error code returned on failure.
          </td>
        </tr>
        <tr>
          <td>
            errorText
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Error message returned on failure.
          </td>
        </tr>
      </tbody>
    </table><br>
    <h4 id="examples-6">
      Examples
    </h4>
    <p>
      <strong>Mojo</strong>
    </p>
    <pre>
this.controller.serviceRequest('palm://com.palm.bluetooth/spp/', {
    method: 'subscribenotifications',
    parameters: { "subscribe": true },
    onSuccess : function (e){ Mojo.Log.info("subscribenotifications success, results="+JSON.stringify(e)); },
    onFailure : function (e){ Mojo.Log.info("subscribenotifications failure, results="+JSON.stringify(e)); }   
});
</pre>
    <p>
      <strong>Success</strong>
    </p>
    <pre>
{"returnValue":true,"subscribed":true}
</pre><a name="SPPdata" id="SPPdata"></a>
    <hr>
    <h2 id="spp-data-transfer-methods">
      SPP Data Transfer Methods
    </h2>
    <p>
      The URI for Serial Port Profile Data Transfer is:
    </p>
    <pre>
com.palm.service.bluetooth.spp
</pre>
    <p>
      <strong>Methods</strong>
    </p>
    <ul>
      <li>
        <a href="#close">close</a> -- Closes a Bluetooth SPP communication channel.
      </li>
      <li>
        <a href="#open">open</a> -- Opens a Bluetooth SPP port for communication.
      </li>
      <li>
        <a href="#read">read</a> -- Reads data from an SPP port.
      </li>
      <li>
        <a href="#write">write</a> -- Writes data to an SPP port.
      </li>
    </ul><a name="close" id="close"></a>
    <hr>
    <h3 id="close">
      close
    </h3>
    <p>
      Close Bluetooth SPP communication channel.
    </p>
    <h4 id="syntax-8">
      Syntax
    </h4>
    <pre>
{
    "instanceId" : int
}   
</pre>
    <h4 id="parameters-8">
      Parameters
    </h4>
    <table border="1" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            instanceId
          </td>
          <td>
            Yes
          </td>
          <td>
            integer
          </td>
          <td>
            Subscribed service identifier.
          </td>
        </tr>
      </tbody>
    </table>
    <h4 id="returns-7">
      Returns
    </h4>
    <pre>
{
    "returnValue"  : boolean,
    "errorText"    : string
}       
</pre>
    <table border="1" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            returnValue
          </td>
          <td>
            Yes
          </td>
          <td>
            boolean
          </td>
          <td>
            <code>true</code> (success) or <code>false</code> (failure)
          </td>
        </tr>
        <tr>
          <td>
            errorText
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Error message returned on failure.
          </td>
        </tr>
      </tbody>
    </table><br>
    <h4 id="examples-7">
      Examples
    </h4>
    <p>
      <strong>Mojo</strong>
    </p>
    <pre>
this.controller.serviceRequest('palm://com.palm.service.bluetooth.spp', {
    method: 'close',
    parameters: { "instanceId" : 23},
    onSuccess : function (e){ Mojo.Log.info("close success, results="+JSON.stringify(e)); },
    onFailure : function (e){ Mojo.Log.info("close failure, results="+JSON.stringify(e)); }     
});
</pre><a name="open" id="open"></a>
    <hr>
    <h3 id="open">
      open
    </h3>
    <p>
      Opens a Bluetooth SPP port for communication.
    </p>
    <h4 id="syntax-9">
      Syntax
    </h4>
    <pre>
{
    "instanceId"  : int
}   
</pre>
    <h4 id="parameters-9">
      Parameters
    </h4>
    <table border="1" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            instanceId
          </td>
          <td>
            Yes
          </td>
          <td>
            integer
          </td>
          <td>
            Subscribed service identifier.
          </td>
        </tr>
      </tbody>
    </table>
    <h4 id="returns-8">
      Returns
    </h4>
    <pre>
{
    "returnValue"  : boolean,
    "errorText"    : string
}       
</pre>
    <table border="1" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            returnValue
          </td>
          <td>
            Yes
          </td>
          <td>
            boolean
          </td>
          <td>
            <code>true</code> (success) or <code>false</code> (failure)
          </td>
        </tr>
        <tr>
          <td>
            errorText
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Error message returned on failure.
          </td>
        </tr>
      </tbody>
    </table><br>
    <h4 id="examples-8">
      Examples
    </h4>
    <p>
      <strong>Mojo</strong>
    </p>
    <pre>
this.controller.serviceRequest('palm://com.palm.service.bluetooth.spp', {
    method: 'open',
    parameters: { "instanceId" : 23},
    onSuccess : function (e){ Mojo.Log.info("open success, results="+JSON.stringify(e)); },
    onFailure : function (e){ Mojo.Log.info("open failure, results="+JSON.stringify(e)); }      
});
</pre><a name="read" id="read"></a>
    <hr>
    <h3 id="read">
      read
    </h3>
    <p>
      Reads data from an SPP port.
    </p>
    <h4 id="syntax-10">
      Syntax
    </h4>
    <pre>
{
    "instanceId" : int,
    "dataLength" : int
}   
</pre>
    <h4 id="parameters-10">
      Parameters
    </h4>
    <table border="1" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            instanceId
          </td>
          <td>
            Yes
          </td>
          <td>
            integer
          </td>
          <td>
            Subscribed service identifier.
          </td>
        </tr>
        <tr>
          <td>
            dataLength
          </td>
          <td>
            Yes
          </td>
          <td>
            integer
          </td>
          <td>
            Size of the buffer to be read.
          </td>
        </tr>
      </tbody>
    </table>
    <h4 id="returns-9">
      Returns
    </h4>
    <pre>
{
    "returnValue"  : boolean,
    "data"         : string,
    "dataLength"   : int,       
    "errorText"    : string
}       
</pre>
    <table border="1" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            returnValue
          </td>
          <td>
            Yes
          </td>
          <td>
            boolean
          </td>
          <td>
            <code>true</code> (success) or <code>false</code> (failure)
          </td>
        </tr>
        <tr>
          <td>
            data
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Data
          </td>
        </tr>
        <tr>
          <td>
            dataLength
          </td>
          <td>
            No
          </td>
          <td>
            int
          </td>
          <td>
            Length of data
          </td>
        </tr>
        <tr>
          <td>
            errorText
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Error message returned on failure.
          </td>
        </tr>
      </tbody>
    </table><br>
    <h4 id="examples-9">
      Examples
    </h4>
    <p>
      <strong>Mojo</strong>
    </p>
    <pre>
this.controller.serviceRequest('palm://com.palm.service.bluetooth.spp', {
    method: 'read',
    parameters: { 
                   "instanceId" : 23, 
                   "dataLength" : 128
    },
    onSuccess : function (e){ Mojo.Log.info("read success, results="+JSON.stringify(e)); },
    onFailure : function (e){ Mojo.Log.info("read failure, results="+JSON.stringify(e)); }      
});
</pre><a name="write" id="write"></a>
    <hr>
    <h3 id="write">
      write
    </h3>
    <p>
      Writes data to an SPP port.
    </p>
    <h4 id="syntax-11">
      Syntax
    </h4>
    <pre>
{
    "instanceId" : int,
    "data"       : string,
    "dataLength" : int
}   
</pre>
    <h4 id="parameters-11">
      Parameters
    </h4>
    <table border="1" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            instanceId
          </td>
          <td>
            Yes
          </td>
          <td>
            integer
          </td>
          <td>
            Subscribed service identifier.
          </td>
        </tr>
        <tr>
          <td>
            data
          </td>
          <td>
            Yes
          </td>
          <td>
            string
          </td>
          <td>
            Data to write.
          </td>
        </tr>
        <tr>
          <td>
            dataLength
          </td>
          <td>
            Yes
          </td>
          <td>
            integer
          </td>
          <td>
            Size of the buffer to be written.
          </td>
        </tr>
      </tbody>
    </table>
    <h4 id="returns-10">
      Returns
    </h4>
    <pre>
{
    "returnValue"  : boolean,   
    "errorText"    : string
}       
</pre>
    <table border="1" cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <th>
            Parameter
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            returnValue
          </td>
          <td>
            Yes
          </td>
          <td>
            boolean
          </td>
          <td>
            <code>true</code> (success) or <code>false</code> (failure)
          </td>
        </tr>
        <tr>
          <td>
            errorText
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Error message returned on failure.
          </td>
        </tr>
      </tbody>
    </table><br>
    <h4 id="examples-10">
      Examples
    </h4>
    <p>
      <strong>Mojo</strong>
    </p>
    <pre>
this.controller.serviceRequest('palm://com.palm.service.bluetooth.spp', {
    method: 'write',
    parameters: { 
                  "instanceId" : 23, 
                  "data"       : "lhasdflkasjhdflasjdhfaouweyroasdfasdfasdfasfdaswqguoyuilj,uiiaewfdas",
                  "dataLength" : 128},
    onSuccess : function (e){ Mojo.Log.info("write success, results="+JSON.stringify(e)); },
    onFailure : function (e){ Mojo.Log.info("write failure, results="+JSON.stringify(e)); }     
});
</pre>
		</div>
	</body>
</html>